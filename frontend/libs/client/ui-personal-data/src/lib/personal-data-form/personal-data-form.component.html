<div [formGroup]="formGroup">
  <fieldset class="mb-3">
    <legend>{{ 'PERSONAL_DATA_FORM.PERSON' | translate }}</legend>
    <mat-form-field class="half-width" data-cy="personal-data-firstName">
      <input
        required
        matInput
        [placeholder]="'PERSONAL_DATA_FORM.VORNAME' | translate"
        formControlName="firstName"
        type="text"
        #first_name_input
        (blur)="trimValue(first_name_input)"
      />
      <mat-error *ngFor="let error of validationErrorService.getErrorKeys(formGroup.controls.firstName)">
        {{ validationErrorService.getErrorMessage(formGroup.controls.firstName, error) | async }}
      </mat-error>
    </mat-form-field>
    <mat-form-field class="half-width" data-cy="personal-data-lastName">
      <input
        matInput
        required
        [placeholder]="'PERSONAL_DATA_FORM.NACHNAME' | translate"
        formControlName="lastName"
        type="text"
        #last_name_input
        (blur)="trimValue(last_name_input)"
      />
      <mat-error *ngFor="let error of validationErrorService.getErrorKeys(formGroup.controls.lastName)">
        {{ validationErrorService.getErrorMessage(formGroup.controls.lastName, error) | async }}
      </mat-error>
    </mat-form-field>
    <mat-form-field class="full-width" data-cy="personal-data-dateOfBirth">
      <mat-label>{{ 'PERSONAL_DATA_FORM.GEBURTSDATUM' | translate }}</mat-label>
      <input
        matInput
        required
        [max]="today"
        [matDatepicker]="dateOfBirthPicker"
        formControlName="dateOfBirth"
        #date_of_birth_input
        (blur)="trimValue(date_of_birth_input)"
      />
      <mat-datepicker-toggle matSuffix [for]="dateOfBirthPicker"></mat-datepicker-toggle>
      <mat-datepicker #dateOfBirthPicker></mat-datepicker>
      <mat-error *ngFor="let error of validationErrorService.getErrorKeys(formGroup.controls.dateOfBirth)">
        {{ validationErrorService.getErrorMessage(formGroup.controls.dateOfBirth, error) | async }}
      </mat-error>
    </mat-form-field>
  </fieldset>
  <fieldset class="mb-3">
    <legend>{{ 'PERSONAL_DATA_FORM.KONTAKTMÃ–GLICHKEITEN' | translate }}</legend>
    <mat-error
      *ngIf="
        formGroup.getError('phoneMissing') &&
        (formGroup.controls.phone.touched || formGroup.controls.mobilePhone.touched)
      "
    >
      {{ 'PERSONAL_DATA_FORM.MINDESTENS_EINE_TELEFONNUMMER' | translate }}</mat-error
    >
    <mat-form-field class="full-width" data-cy="personal-data-email">
      <input
        matInput
        required
        [placeholder]="'PERSONAL_DATA_FORM.E_MAIL' | translate"
        formControlName="email"
        type="email"
        #email_input
        (blur)="trimValue(email_input)"
      />
      <mat-error *ngFor="let error of validationErrorService.getErrorKeys(formGroup.controls.email)">
        {{ validationErrorService.getErrorMessage(formGroup.controls.email, error) | async }}
      </mat-error>
    </mat-form-field>
    <mat-form-field class="full-width" data-cy="personal-data-phone">
      <input
        matInput
        maxlength="17"
        minlength="5"
        [placeholder]="'PERSONAL_DATA_FORM.TELEFONNUMMER_FESTNETZ' | translate"
        formControlName="phone"
        type="phone"
        #phone_input
        (blur)="trimValue(phone_input)"
      />
      <mat-error *ngFor="let error of validationErrorService.getErrorKeys(formGroup.controls.phone)">
        {{ validationErrorService.getErrorMessage(formGroup.controls.phone, error) | async }}
      </mat-error>
    </mat-form-field>
    <mat-form-field class="full-width" data-cy="personal-data-mobile">
      <input
        matInput
        maxlength="17"
        minlength="5"
        [placeholder]="'PERSONAL_DATA_FORM.TELEFONNUMMER_MOBIL' | translate"
        formControlName="mobilePhone"
        type="phone"
        #mobile_phone_input
        (blur)="trimValue(mobile_phone_input)"
      />
      <mat-error *ngFor="let error of validationErrorService.getErrorKeys(formGroup.controls.mobilePhone)">
        {{ validationErrorService.getErrorMessage(formGroup.controls.mobilePhone, error) | async }}
      </mat-error>
    </mat-form-field>
  </fieldset>
  <fieldset class="mb-3">
    <legend>{{ 'PERSONAL_DATA_FORM.ADRESSE' | translate }}</legend>
    <mat-form-field style="width: 70%;" data-cy="street-input">
      <input
        matInput
        required
        [placeholder]="'PERSONAL_DATA_FORM.STRASSE' | translate"
        formControlName="street"
        type="text"
        #street_input
        (blur)="trimValue(street_input)"
      />
      <mat-error *ngFor="let error of validationErrorService.getErrorKeys(formGroup.controls.street)">
        {{ validationErrorService.getErrorMessage(formGroup.controls.street, error) | async }}
      </mat-error>
    </mat-form-field>
    <mat-form-field style="width: 30%;" data-cy="house-number-input">
      <input
        matInput
        [placeholder]="'PERSONAL_DATA_FORM.HAUSNUMMER' | translate"
        maxlength="6"
        formControlName="houseNumber"
        type="text"
        #house_number_input
        (blur)="trimValue(house_number_input)"
      />
      <mat-error *ngFor="let error of validationErrorService.getErrorKeys(formGroup.controls.houseNumber)">
        {{ validationErrorService.getErrorMessage(formGroup.controls.houseNumber, error) | async }}
      </mat-error>
    </mat-form-field>
    <mat-form-field style="width: 30%;" data-cy="zip-code-input">
      <input
        matInput
        required
        [placeholder]="'PERSONAL_DATA_FORM.POSTLEITZAHL' | translate"
        formControlName="zipCode"
        type="text"
        #zip_code_input
        (blur)="trimValue(zip_code_input)"
      />
      <mat-error *ngFor="let error of validationErrorService.getErrorKeys(formGroup.controls.zipCode)">
        {{ validationErrorService.getErrorMessage(formGroup.controls.zipCode, error) | async }}
      </mat-error>
    </mat-form-field>
    <mat-form-field style="width: 70%;" data-cy="city-input">
      <input
        matInput
        required
        [placeholder]="'PERSONAL_DATA_FORM.ORT' | translate"
        formControlName="city"
        type="text"
        #city_input
        (blur)="trimValue(city_input)"
      />
      <mat-error *ngFor="let error of validationErrorService.getErrorKeys(formGroup.controls.city)">
        {{ validationErrorService.getErrorMessage(formGroup.controls.city, error) | async }}
      </mat-error>
    </mat-form-field>
  </fieldset>
</div>
